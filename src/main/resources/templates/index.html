<!DOCTYPE html>
<html lang="pt">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link th:href ="@{/styles/stylesheet.css}" rel="stylesheet">
    <title>UFABC Smart Parking</title>
</head>

<body style="margin:0">
<div class="header">
    <img th:src="@{/images/logotipo-ufabc-abaixo.png}" alt="logo">
    <h1>UFABC Smart Parking</h1>
</div>

<div class="vaga" id="vaga1">
</div>

<div class="vaga" id="vaga2">
</div>

<div class="vaga" id="vaga3">
</div>

<div class="vaga" id="vaga4">

</div>
<script>
    function getElement(id) {
        return document.getElementById(id);
    }
    function getData(){
        $.ajax({
            url: '/update-sensors',
            type: "GET",
            dataType: "json",
            success: function (data) {
                if(data.main.digitalPin2.occupied == true){
                    getElement("vaga1").style.backgroundColor = "red"
                }
                else{
                    getElement("vaga1").style.backgroundColor = "green"
                }
                if(data.main.digitalPin3.occupied == true){
                    getElement("vaga2").style.backgroundColor = "red"
                }
                else{
                    getElement("vaga2").style.backgroundColor = "green"
                }
                if(data.main.digitalPin4.occupied == true){
                    getElement("vaga3").style.backgroundColor = "red"
                }
                else{
                    getElement("vaga3").style.backgroundColor = "green"
                }
                if(data.main.digitalPin5.occupied == true){
                    getElement("vaga4").style.backgroundColor = "red"
                }
                else{
                    getElement("vaga4").style.backgroundColor = "green"
                }
                setTimeout(getData, 5000)
            }
        },

        )}
    $(document).ready(function() {
        getData();
    });
    ;
</script>

</body>
</html>